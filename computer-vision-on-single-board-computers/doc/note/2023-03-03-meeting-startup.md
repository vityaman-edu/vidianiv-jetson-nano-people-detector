# Встреча 03.03.2023

## Содержание

Мы решили просто закинуть сюда сообщения из телеграм чата.

Доска с рисунками схемы проекта:
https://excalidraw.com/#room=64e84e33e13b0a2e1b77,07zdA3QpvjkY7Jtvw39faQ


## Вопросы и ответы

Мы собрали команду из 4 человек и хотели бы взять проект, связанный 
определением количества людей в комнате с помощью CV, по встроенным 
системам. Хотим ее взять, потому у нас в этом семестре курс по машинному 
обучению (на данный момент мы пока в этом не большие специалисты).

- - - 

- Мы берём всю эту тему целиком или углубляемся только в одно 
  направление (например: только ПО для камер, либо только бэк с 
  нейросетью, либо что-то третье)? 
- Есть ли уже наработки по данной теме? 
- Насколько это вообще большая работа? 
- Как мы сможем распределить обязанности между нами?

Если вообще не было опыта с алгоритмами цифровой обработки 
сигналов, нейросетями и программированием, то тема очень большая. 
Начинать её нужно с разбора готовых библиотек анализа видео и писать ПО 
для обработки видео, считая, что камеры мы имеем готовые и уже настроена 
система сбора данных с них. 

В рамках данного проекта может быть несколько активностей: 
- алгоритмы обработки видео, 
- клиентская система (например в виде веб сайта), 
  позволяющая настраивать параметры наблюдения и 
  визуализирующую результаты обработки видео, 
- анализ эффективности используемых технологий, 
  решений, библиотек (тестирование и профилирование), 
- документирование полученных результатов.

- - - 

- По какому протоколу осуществляется общение камер с внешним миром, в каком формате видео?
- Мы будем работать на Raspberri Pi или Jetson Nano? В чем заключается работа на них?

Работаем на низком уровне с векторным сопроцессором и 
встроенным GPU у Jetson Nano в задаче по обработке видео: для собирания 
статистики по перемещению людей на видео. Нужно будет идти от 
существующей реализации и оптимизировать её по скорости для работы на 
Jetson Nano.

Минимальный состав аппаратного обеспечения: это плата Jetson Nano + 
камера. На перспективу, это несколько таких плат с камерами, помещенными 
в разных местах помещения, образующих уже систему видеонаблюдения.

- - - 

- А что за существующий алгоритм? 
- Его разработали наши предшественники? 
- Где нам найти репозиторий с проектом?

Существующие алгоритмы вам надо найти в рамках развития данной темы и 
выбрать лучший из существующих. Можно начать с возможностей библиотеки 
OpenCV

- - - 

- Какие критерии достижения цели?

Минимальный критерий достижения цели - это поддержать функцию по 
обнаружению людей на видео и сбора статистики по их приходу/уходу из 
аудитории на одной плате Jetson Nano с камерой. Если это быстро 
получится, то далее надо оптимизировать реализацию для понижения 
загрузки процессора и использования ресурсов памяти, что актуально в 
системах, где не особо мощные процессоры и память ограничена.

- - - 

Можно ли будет по ходу дела как-то редактировать тему и задачи, если мы 
в процессе углубимся в другую часть проекта (либо сделаем больше, либо 
меньше, либо просто захочется изменить область работы)?

Да, можно будет менять детали ТЗ, но общий вектор не должен меняться.

- - - 

Тему лучше определить компактно: 
"Создание системы видеонаблюдения на базе одноплатных компьютеров"

- - - 

Библия глубокого обучения - Глубокое обучение. 
Погружение в мир нейронных сетей от Николенко


## Черновики к ТЗ

Как я вижу:
- Бэк абстрактно принимает видео и сохраняет, также сохраняет статистику
- бэк умеет стримить видео и отдавать статистику на 
  конкретный момент времени
- Можно вообще не делать фронт: 
  не важно, фронт у нас - веб в браузере, 
  либо телефон, либо десктоп

- - - 

Поток данных

Камера
- Принимает Свет
- Отдает стрим закодированного видео

Джетсон нано 

- Препроцессинг
  - Принимает стрим
  - Отдает стрим с фильтрами

- Нейросеть
  - Прининимает стрим с фильтром
  - Отдает инфу о людях

- Оригинальный стрим параллельно идет мимо препроцессинга куда-то
- Инфа о людях идет куда-то
- В каждый этап можно вклиниться тк видео в одном формате

- Можно читать видео утилитой со своего компа
- Также видео можно принимать на бэке

- Бэк может принимать видео и сразу отдавать куда-то таким же стримом 
- Бэк сохраняет фреймы статистики
- Бэк может отдавать статистику по периоду времени по запросу
- К бэку за стримом или статой может обращаться какой-нибудь клиент

- - -  

- Надежность
  - Система должна работать с 8 до 20
  - Допустимы перебои на 20-30 минут
  - Отдаем статистику за 2 секунды
  - Актуальность видео стрима минута
  - Подключение к стриму начинается через 10 секунд после запроса

- Точность
  - Видео от 20 кадров в секунду 
  - Разрешение небольшое, экономим трафик
  - ЧБ цвета

- Безопасность
  - Нужно шифровать видео при передаче по сети
  - По проводам не шифруем для производительности

- Требования к доке
  - Описание алгоса и ссылки на источники
  - Высокоуровневое описание процессов
  - Тикеты в гитлабе

- Этапы
  - Подключаемся через ноут напрямую к камере 
    и выводим ее изображение, радуемся
  - Пишем алгос предобработки наивно, прям на своем компе, 
    применяем его к видео с камеры, радуемся
  - Проксируем видео также на ноут но через джетсон нано
  - Пишем алгос предобработки для джетсон нано, 
    смотрим прокси с ноута, радуемся

- - - 

Пример работы с jetson-nano и камерой:
https://jetsonhacks.com/2019/04/02/jetson-nano-raspberry-pi-camera/
